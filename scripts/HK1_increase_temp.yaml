alias: HK1_increase_temperature
sequence:
  - service: climate.set_temperature
    data:
      temperature: >-
        {% set flow_delta = states('sensor.vitocal_vorlauftemperatur_delta') |
        float %}  {% if (flow_delta <= 0) %}
          {{ state_attr('climate.open3e_vitocal250a_heizkreis_1', 'temperature') + 3 }}
        {% else %}
          {{ state_attr('climate.open3e_vitocal250a_heizkreis_1', 'temperature') + 1 }}
        {% endif %}
    target:
      entity_id: climate.open3e_vitocal250a_heizkreis_1
mode: single
